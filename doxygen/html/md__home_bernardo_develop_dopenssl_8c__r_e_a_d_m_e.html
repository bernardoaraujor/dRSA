<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>dOpenSSL C: dOpenSSL</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">dOpenSSL C
   &#160;<span id="projectnumber">0.1</span>
   </div>
   <div id="projectbrief">A deterministic implementation of some of the OpenSSL functionalities .</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('md__home_bernardo_develop_dopenssl_8c__r_e_a_d_m_e.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">dOpenSSL </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><div class="image">
<object type="image/svg+xml" data="https://github.com/bernardoaraujor/dopenssl/workflows/C/C++%20CI/badge.svg" alt="C/C++ CI"></object>
</div>
<ul>
<li><a href="#intro">Intro</a></li>
<li><a href="#dopenssl-for-iota">dOpenSSL for IOTA</a></li>
<li><a href="#dependencies">Dependencies</a></li>
<li><a href="#clone--build--install">Clone, Build, Install</a></li>
<li><a href="#example">Example</a></li>
<li><a href="#references">References</a></li>
<li><a href="#maintainers">Maintainers</a></li>
</ul>
<h2>Intro</h2>
<p><b>Disclaimer:</b> This is the continuation of the <a href="https://github.com/infinit/dopenssl">original implementation</a> by <a href="https://infinit.sh/">Infinit</a>. <a href="https://github.com/infinit/drake">Drake</a> has been replaced by <a href="https://cmake.org/">CMake</a> as default build system.</p>
<p>The dOpenSSL library extends the OpenSSL Project cryptographic library so as to provide deterministic random generation functionalities. Basically, dOpenSSL guarantees that should a big number or a cryptographic key be generated, given a PRNG's state, the result would be always the same.</p>
<p>The OpenSSL random generator introduces entropy in many places, making it unusable in a deterministic way. Thus, some functions have been cloned and adapted in order to guarantee determinism.</p>
<p>This product includes software developed by the OpenSSL Project for use in the OpenSSL Toolkit.</p>
<h1>dOpenSSL for IOTA</h1>
<p><a href="https://iota.org">IOTA</a> uses seeds as source of entropy for PNRGs and generate signing private keys in a deterministic way.</p>
<p>This implementation of dOpenSSL aims to deterministically create SSL keypairs based on IOTA seeds.</p>
<p>IOTA seeds are kept safe via <a href="https://en.wikipedia.org/wiki/Hardware_security_module">Hardware Security Modules (HSM)</a> or <a href="https://github.com/iotaledger/stronghold.rs.git">IOTA Stronghold</a>. Private key representations only exist on RAM while the Access Authenticated SSL/TCP session exists. As soon as the socket is closed, private keys are destroyed.</p>
<h2>Dependencies</h2>
<p>The library relies upon the following libraries:</p>
<ul>
<li><a href="http://www.openssl.org"><b>OpenSSL</b></a> which provides the fundamental cryptographic operations. Install v1.0.2 into Ubuntu 18.04 with:</li>
</ul>
<div class="fragment"><div class="line">$ sudo apt-get install libssl1.0-dev -y</div></div><!-- fragment --><h2>Clone, Build, Install</h2>
<p>Assuming you're on Ubuntu 18.04:</p>
<div class="fragment"><div class="line">$ git clone http://github.com/bernardoaraujor/dopenssl</div><div class="line">$ cd dopenssl</div><div class="line">$ mkdir build; cd build</div><div class="line">$ cmake ..; make</div><div class="line">$ sudo make install</div></div><!-- fragment --><h2>Example</h2>
<p>The following source code can be found in <code>src/sample.c</code>.</p>
<p>It shows how dOpenSSL can be used to generate cryptographic keys (in this case 2048-bit RSA keys) in a deterministic way i.e based on a given passphrase (seed).</p>
<p>The program therefore assures that, given the same passphrase (seed), the exact same RSA key will be generated.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;stdlib.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;string.h&gt;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &lt;dopenssl/rsa.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;dopenssl/rand.h&gt;</span></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv)</div><div class="line">{</div><div class="line">  <span class="keywordflow">if</span> (argc != 2)</div><div class="line">  {</div><div class="line">    printf(<span class="stringliteral">&quot;usage: %s [passphrase]\n&quot;</span>, argv[0]);</div><div class="line">    <span class="keywordflow">return</span>(1);</div><div class="line">  }</div><div class="line"></div><div class="line">  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <span class="keyword">const</span> bits = 2048;</div><div class="line"></div><div class="line">  <span class="keywordtype">char</span> <span class="keyword">const</span>* passphrase = argv[1];</div><div class="line">  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <span class="keyword">const</span> length = strlen(passphrase);</div><div class="line">  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <span class="keyword">const</span> size = bits / 8;</div><div class="line">  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <span class="keyword">const</span> occurences = size / length + 1;</div><div class="line"></div><div class="line">  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* seed = malloc(occurences * length + 1);</div><div class="line">  memset(seed, 0x0, occurences * length + 1);</div><div class="line"></div><div class="line">  <span class="comment">/* Concatenate the passphrase so as to create a 256-byte buffer */</span></div><div class="line">  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i;</div><div class="line">  <span class="keywordflow">for</span> (i = 0; i &lt; occurences; i++)</div><div class="line">    strncpy(seed + (i * length), passphrase, length);</div><div class="line"></div><div class="line">  <span class="comment">/* Initialize the deterministic random generator */</span></div><div class="line">  <span class="keywordflow">if</span> (dRAND_init() != 1)</div><div class="line">  {</div><div class="line">    printf(<span class="stringliteral">&quot;[error] unable to initialize the random generator\n&quot;</span>);</div><div class="line">    <span class="keywordflow">return</span> (1);</div><div class="line">  }</div><div class="line"></div><div class="line">  <span class="comment">/* Generate the RSA key */</span></div><div class="line">  RSA* rsa = NULL;</div><div class="line"></div><div class="line">  <span class="keywordflow">if</span> ((rsa = dRSA_deduce_privatekey(bits, seed, size)) == NULL)</div><div class="line">  {</div><div class="line">    printf(<span class="stringliteral">&quot;[error] unable to generate the RSA key pair\n&quot;</span>);</div><div class="line">    <span class="keywordflow">return</span> (1);</div><div class="line">  }</div><div class="line"></div><div class="line">  <span class="comment">/* Display the RSA components */</span></div><div class="line">  RSA_print_fp(stdout, rsa, 0);</div><div class="line"></div><div class="line">  <span class="comment">/* Clean the resources */</span></div><div class="line">  <span class="keywordflow">if</span> (dRAND_clean() != 1)</div><div class="line">  {</div><div class="line">    printf(<span class="stringliteral">&quot;[error] unable to clean the random generator\n&quot;</span>);</div><div class="line">    <span class="keywordflow">return</span> (1);</div><div class="line">  }</div><div class="line"></div><div class="line">  <span class="keywordflow">return</span> (0);</div><div class="line">}</div></div><!-- fragment --><p>After installing <code>libdopenssl</code> on your system, do the command below to build this example: </p><div class="fragment"><div class="line">$ gcc src/sample.c -o sample -ldopenssl -lcrypto</div></div><!-- fragment --><p>Finally, just launch the sample program by providing a passphrase:</p>
<div class="fragment"><div class="line">$ ./sample &quot;chiche donne nous tout&quot;</div><div class="line">Private-Key: (2048 bit)</div><div class="line">modulus:</div><div class="line">    00:c2:06:28:58:c4:ee:e8:d0:65:e5:2f:fd:d4:1c:</div><div class="line">    86:73:fb:77:ab:cc:ee:50:3e:20:b1:d2:7e:3c:bf:</div><div class="line">    20:35:2f:b7:1e:ab:4a:03:d0:9f:c7:8f:46:44:8f:</div><div class="line">    03:a4:3c:da:e2:19:f0:fe:41:e2:7b:41:75:76:3a:</div><div class="line">    b0:d0:de:eb:26:dd:4c:c7:50:d5:33:61:bf:71:8a:</div><div class="line">    6e:b2:bb:bf:1b:2e:14:6b:a3:1c:c7:0d:5a:31:67:</div><div class="line">    2c:9f:e9:17:56:31:8c:9f:86:93:f7:b3:2e:2c:c0:</div><div class="line">    59:24:43:5c:ed:bd:0b:bc:4d:65:33:c7:89:4e:62:</div><div class="line">    f7:9f:cd:da:5c:f9:e4:c9:b2:9c:43:6f:78:06:32:</div><div class="line">    e6:f5:07:1e:c0:fa:1e:6d:4b:c8:68:a8:93:a7:53:</div><div class="line">    e7:11:92:e0:e0:43:6d:11:36:a6:37:18:9b:33:c3:</div><div class="line">    8a:75:cf:3a:10:18:67:3c:13:07:6c:a6:6b:f2:6b:</div><div class="line">    36:aa:fd:9c:29:5a:38:95:0d:e0:a2:81:07:41:9a:</div><div class="line">    17:62:a4:9e:fc:a7:32:1a:3d:79:83:75:fa:73:e8:</div><div class="line">    47:e2:ac:08:2e:65:cc:12:a1:ac:59:b1:e8:e1:4d:</div><div class="line">    6c:0e:8e:01:02:53:f1:52:04:a3:3f:03:c4:02:0a:</div><div class="line">    9f:35:3f:a2:b9:4d:66:31:63:5a:77:3d:28:ab:bb:</div><div class="line">    24:6f</div><div class="line">publicExponent:</div><div class="line">    01:b4:65:67:bf:94:56:af:f4:12:61:6b:73:7e:e8:</div><div class="line">    89:5e:95:39:44:ac:7c:85:5c:fe:65:4f:23:1e:b8:</div><div class="line">    96:50:3f:bc:27:89:ae:8a:84:4a:d9:07:8a:67:5f:</div><div class="line">    20:7f:85:90:45:32:db:0f:28:0b:00:2c:3f:16:d1:</div><div class="line">    4c:69:82:df:d5:05:35:8c:ed:2e:69:b9:cc:c2:69:</div><div class="line">    50:5b:30:96:b9:51:b5:8d:4e:25:9a:ef:d7:fa:ae:</div><div class="line">    65:f2:3b:41:32:19:e3:04:81:1d:a5:ec:d8:d1:04:</div><div class="line">    ad:e5:af:42:4a:1d:91:88:9c:6e:09:32:43:3a:e9:</div><div class="line">    d3:83:60:64:b2:54:4c:98:1b</div><div class="line">[...]</div></div><!-- fragment --><p>Note that you should get exactly the same output since dOpenSSL guarantees the result is deterministic.</p>
<h2>References</h2>
<ul>
<li><a href="http://www.mathaware.org/mam/06/Kaliski.pdf"><em>The Mathematics of the RSA Public-Key Cryptosystem</em></a>. Burt Kaliski. <b>RSA Laboratories</b>.</li>
<li><a href="https://hackernoon.com/how-does-rsa-work-f44918df914b"><em>How does RSA work?</em></a> Jeronimo (Jerry) Garcia. <b>Hackernoon</b>.</li>
</ul>
<h2>Maintainers</h2>
<ul>
<li>Website: <a href="https://about.me/bernardo_ar">https://about.me/bernardo_ar</a></li>
<li>Email: <a href="#" onclick="location.href='mai'+'lto:'+'ber'+'na'+'rdo'+'ar'+'auj'+'or'+'@gm'+'ai'+'l.c'+'om'; return false;">berna<span style="display: none;">.nosp@m.</span>rdoa<span style="display: none;">.nosp@m.</span>raujo<span style="display: none;">.nosp@m.</span>r@gm<span style="display: none;">.nosp@m.</span>ail.c<span style="display: none;">.nosp@m.</span>om</a> </li>
</ul>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
